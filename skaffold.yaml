apiVersion: skaffold/v2beta19
kind: Config
metadata:
  name: open-sse
build:
  artifacts:
  - image: sse-server
    docker:
      dockerfile: Server.dockerfile
  - image: sse-broker
    docker:
      dockerfile: Broker.dockerfile
  - image: webclient
    context: webclient
deploy:
  kubectl:
    manifests:
    - infra/broker/local.yaml
    - infra/server/local.yaml
    - infra/webclient/local.yaml
    - infra/client-register/local.yaml
portForward:
- resourceType: service
  resourceName: sse-server
  port: 80
  localPort: 8090
  address: 0.0.0.0
- resourceType: service
  resourceName: sse-broker
  port: 80
  localPort: 8091
  address: 0.0.0.0
- resourceType: service
  resourceName: webclient
  port: 80
  localPort: 8092
  address: 0.0.0.0
- resourceType: service
  resourceName: client-register
  port: 6379
  localPort: 6379
  address: 0.0.0.0